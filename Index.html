<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>حاسبة دجاج التسمين</title>
<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #fff4e1, #fffaf3);
  margin: 0;
  padding: 0;
  direction: rtl;
}
h1 {
  text-align: center;
  font-size: 2em;
  color: #ffffff;
  padding: 20px;
  margin: 0;
  background: linear-gradient(90deg, #ff9800, #ffc107);
  border-bottom-left-radius: 15px;
  border-bottom-right-radius: 15px;
  font-weight: bold;
}
.container {
  max-width: 750px;
  margin: 20px auto;
  background: #ffffff;
  padding: 25px 30px;
  border-radius: 20px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}
.section {
  margin-bottom: 25px;
  padding: 15px 10px;
  background: #fff8e1;
  border-radius: 15px;
  border-left: 6px solid #ff9800;
}
input {
  width: 100%;
  padding: 12px 15px;
  margin: 8px 0;
  border-radius: 12px;
  border: 1px solid #cfd8dc;
  font-size: 15px;
  background: #fff;
}
.buttons-group {
  display: flex;
  justify-content: space-between;
}
button {
  width: 48%;
  padding: 14px;
  margin-top: 10px;
  font-size: 16px;
  font-weight: bold;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  color: #fff;
}
#calculateBtn { background: linear-gradient(90deg, #ff9800, #ffc107); }
#whatIfBtn { background: linear-gradient(90deg, #1976d2, #42a5f5); }
button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(0,0,0,0.15);
}
#result {
  margin-top: 20px;
  padding: 18px 15px;
  border-radius: 15px;
  font-weight: bold;
  font-size: 20px;
}
.profit { color: #2e7d32; }
.loss { color: #c62828; }
.result-item { display: flex; align-items: center; margin-top: 5px; }
.result-item i { margin-left: 8px; color: #555; }
footer {
  text-align: center;
  margin: 25px 0 0 0;
  font-size: 14px;
  color: #555;
}
footer .owner { font-weight: bold; color: #f57c00; }
.chicken-img {
  display: block;
  margin: 15px auto;
  max-width: 150px;
}
</style>
</head>
<body>
<h1>حاسبة دجاج التسمين</h1>
<img src="https://i.imgur.com/6YbMJdJ.png" alt="دجاج" class="chicken-img">

<div id="app" class="container">
  <div class="section">
    <input type="number" v-model.number="priceChick" placeholder="سعر الكتكوت">
    <input type="number" v-model.number="numChicks" placeholder="عدد الكتكيت">
    <input type="number" v-model.number="feedPrice" placeholder="سعر العلف للقنطار">
    <input type="number" v-model.number="feedUsed" placeholder="كمية العلف المستخدمة (قنطار)">
    <input type="number" v-model.number="sellPrice" placeholder="سعر البيع للكيلو">
    <input type="number" v-model.number="commission" placeholder="هامش التاجر / الوسطاء لكل كيلو">
    <input type="number" v-model.number="medicine" placeholder="سعر الدواء">
    <input type="number" v-model.number="waterEnergy" placeholder="سعر الماء والكهرباء والغاز">
    <input type="number" v-model.number="workers" placeholder="أجور العمال">
    <input type="number" v-model.number="bedding" placeholder="تكلفة الفرشة">
    <input type="number" v-model.number="cleaning" placeholder="تكلفة التنظيف والتعقيم">
    <input type="number" v-model.number="taxes" placeholder="الضرائب أو الرسوم">
    <input type="number" v-model.number="deadLarge" placeholder="عدد الدجاج الميت كبير (2.5-3.5كغ)">
    <input type="number" v-model.number="deadMedium" placeholder="عدد الدجاج الميت متوسط (1-2 كغ)">
    <input type="number" v-model.number="deadSmall" placeholder="عدد الدجاج الميت صغير (<1كغ)">
    <input type="number" v-model.number="unsold" placeholder="عدد الدجاج غير المباع">
    <input type="number" v-model.number="totalWeight" placeholder="الوزن الكلي للدجاج (كغ)">
  </div>

  <div class="buttons-group">
    <button id="calculateBtn" @click="calculate"><i class="fas fa-calculator"></i> احسب</button>
    <button id="whatIfBtn" @click="restore"><i class="fas fa-sync-alt"></i> ماذا لو؟</button>
  </div>

  <div id="result" :class="profit>=0 ? 'profit' : 'loss'" v-if="profit!==null">
    <div class="result-item"><i class="fas fa-coins"></i> {{ profit >=0 ? 'الربح المتوقع: ' : 'الخسارة المتوقعة: ' }}{{ formatCurrency(profit>=0?profit:-profit) }}</div>
    <div class="result-item"><i class="fas fa-weight-hanging"></i> متوسط وزن الدجاج: {{ averageWeight.toFixed(2) }} كغ</div>
    <div class="result-item"><i class="fas fa-skull-crossbones"></i> نسبة الموت: {{ mortalityRate.toFixed(2) }}%</div>
  </div>

  <footer>
    Developed by <span class="owner">Kaci Mebarek</span>
  </footer>
</div>

<script>
const { createApp } = Vue;

createApp({
  data() {
    return {
      priceChick: null,
      numChicks: null,
      feedPrice: null,
      feedUsed: null,
      sellPrice: null,
      commission: null,
      medicine: null,
      waterEnergy: null,
      workers: null,
      bedding: null,
      cleaning: null,
      taxes: null,
      deadLarge: null,
      deadMedium: null,
      deadSmall: null,
      unsold: null,
      totalWeight: null,
      profit: null,
      averageWeight: 0,
      mortalityRate: 0,
      backup: {}
    }
  },
  methods: {
    formatCurrency(value){
      // التحويل للغة العمية كما طلبت
      if(value >= 100000){
        let millions = value / 10000; // 100000 → 10 مليون
        return `${millions.toFixed(0)} مليون`;
      }
      if(value >= 1000){
        let thousands = value / 100; // 1000 → 100 ألف
        return `${thousands.toFixed(0)} ألف`;
      }
      if(value >= 100){
        let tenThousands = value / 10; // 100 → 10 ألف
        return `${tenThousands.toFixed(0)} ألف`;
      }
      return `${value}`;
    },
    calculate() {
      if(Object.keys(this.backup).length===0){ this.backup = {...this.$data}; }

      const costChicks = this.priceChick * this.numChicks;
      const costFeed = this.feedPrice * this.feedUsed;
      const costCommission = this.commission * this.totalWeight;
      const costDead = (this.deadLarge*3 + this.deadMedium*1.5 + this.deadSmall*0.5) * this.sellPrice;
      const costUnsold = this.unsold * this.sellPrice;
      const totalCost = costChicks + costFeed + costCommission + this.medicine + this.waterEnergy + this.workers + this.bedding + this.cleaning + this.taxes + costDead + costUnsold;
      const totalIncome = this.sellPrice * this.totalWeight;
      this.profit = totalIncome - totalCost;

      const totalDead = this.deadLarge + this.deadMedium + this.deadSmall + this.unsold;
      this.mortalityRate = (totalDead / this.numChicks) * 100;
      this.averageWeight = this.totalWeight / this.numChicks;
    },
    restore() {
      if(this.backup && Object.keys(this.backup).length > 0){
        for(let key in this.backup){
          if(this.hasOwnProperty(key)){
            this[key] = this.backup[key];
          }
        }
        this.profit = null;
        this.averageWeight = 0;
        this.mortalityRate = 0;
      }
    }
  }
}).mount('#app');
</script>
</body>
</html>  
